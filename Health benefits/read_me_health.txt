This folder contains all the codes and data for calculating health benefits by adaptation both in the current period (2014-2018) and future scenarios, and the programming languages include Stata17.0 and Python 3.12. 

Specifically, 

1. Folder "codes": 
                  Firstly, The stat do-file is "CFPS_the_Yangzte_River_Delta_Supplementary_TablesD1D2D3.do", using to calculate the risk ratio of poor health probability for each wealth subgroup compared to the Low-wealth subgroup by Stata17.0. The results of this part are in the corresponding SUpplementary Tables D1, D2, D3. And based on the risk ratios of all wealth subgroups, we further calculated the temperature-related relative risks(RRs) and corresponding 95%CI for each wealth subgroup by Excel.

                  The folder "codes" includes folder "temp & pop", in this folder, files "Temp_conversion_temp_weighted.py" and "Future_temp_count.py" calculate the conversion from Kelvin to Celsius and the daily average temperature in the Yangtze River Delta region is obtained by weighting the area of ​​the four regions in the Yangtze River Delta, and also calculate the number of days with a 1 Celsius degree temperature interval for the mean daily temperature under future scenarios; file "Future_temp_count.py" counts days of the daily average temperature under future scenarios, and finally these results of temperature are represented in Supplementary Fig E1. Files "ssp1_wealth_percentage.py", "ssp2_wealth_percentage.py","ssp4_wealth_percentage.py","ssp5_wealth_percentage.py" calculate the wealth subgroup's population percentage of the total population, and file "SSPs_pop_subgroup.py" calculate the population of each wealth subgroup through multiplying by the total population of the Yangtze River Delta in the future scenario. 
  
                  The folder "codes" also includes two folders, folder "2014-18" and folder "Future scenarios" correspond to the codes for calculating health benefits of the current period (2014-18) and future scenarios respectively. And each folder contains 
three subfolders, they are "the number of avoidable deaths", "the number of deaths with adapt", and "the number of deaths without adapt",respectively. Each subfolder contains the codes for calculating health benefits of subgroups and the total population. We use Python 3.12 for finishing this part calculation.

2. Folder "data": 
                  All of csv or xlsx files in the folder, the variables “ 0.2, 0.4, 0.6, 0.8, 1.0 “, “w0, w1, w2, w3, w4”  and “0, 1, 2, 3, 4” all denote the Low-, Lower middle-, Middle-, Upper middle-, and High-wealth subgroup, respectively.
                  Files  “adapt_RR_total.csv” and “adapt_95%CI.csv” denote the adaptation’s proportion at every temperature of the total population and its 95%CI, The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation, which are used to calculate confidence intervals. File "adapt_subgroup.xlsx" denotes the adaptation’s proportion at every temperature for each wealth subgroup, and the folder "adapt_Monte Carlo" include "dec.csv" and "inc.csv" series 10 files in total, denote the each wealth subgroup's adaptation proportion at every temperature during 0-21 Celsius degree interval and 23-33 Celsius degree interval for five grids (Since the optimal temperature is between 22°C  and 23°C, we categorize 0-33°C into 2 parts: 0-21°C and 23-33°C)
                  Files “RR_total.csv” and “RR_total_95%CI.csv” denote the temperature-related relative risks (RRs) of the total population. The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation, which are used to calculate confidence intervals.
                  File “RR_subgroup.xlsx” and “RR_95%CI_subgroup.csv” denote each wealth subgroup’s temperature-related relative risks (RRs). The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation, which are used to calculate confidence intervals.
                  File “AR_95%CI_subgroup.csv” denotes the attributable risk fraction for each wealth group, and the equation for AR and RR is AR = (RR-1)/RR; similarly, variables AR0 to AR199 denote the values ​​of 200 AR obtained by Monte Carlo simulation, which are used to calculate confidence intervals.
                  File "CFPS_the_Yangzte_River_Delta_Supplementary_TablesD1D2D3.dta" denote the respondent's information of China Family Panel Studies.

3. The path of folder "future" is "/Users/cbhbook/Desktop/code/Health benefits/data/future" 
                  File "Income_freq_SSPs.csv" denotes the frequency of annual per capita disposable income of the survey respondents included in CFPS under future scenarios, we count the frequency and classified them according to the quintiles of disposable income, and calculated the percentage of the population in each wealth subgroup.
                  File "csj_pop_ssps.csv" denotes the permanent population of Yangtze Rivier Delta under future scenarios. Files "ssp1_percentage.csv", "ssp2_percentage.csv","ssp4_percentage.csv","ssp5_percentage.csv" denote the percentage of population in each wealth subgroup to total population during 2030 to 2100 under future scenarios, and the files "ssp1_pop_income.csv", "ssp2_pop_income.csv", "ssp4_pop_income.csv", "ssp5_pop_income.csv" denote the population of each wealth subgroup during 2030 to 2100 under future scenarios. 
                  
                  File "yangtze_delta_bcc_tas.csv" denote the Daily average temperature in four provincial administrative units in the Yangtze River Delta under future scenarios, and file "yangtze_delta_temp_weighted.csv" denotes the average daily temperature in the Yangtze River Delta obtained by weighting the area of four provincial units. Files "ssp1_days_count.csv", "ssp2_days_count.csv","ssp4_days_count.csv","ssp5_days_count.csv" denote the number of days with daily average temperature in each 1 Celsius degree temperature range under future scenarios.

                  Files “ RR_total_pop.xlsx” and “RR_total_pop_CI.csv” denote the temperature-related relative risks (RRs) of the total population. The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation, which are used to calculate confidence intervals. 
                  Files “ RR_subgroup.xlsx” and “RR_CI_subgroup.csv” denote the temperature-related relative risks (RRs) for wealth subgroups. The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation, which are used to calculate confidence intervals.
                  Files " adapt_total_pop.csv” and “adapt_total_pop_CI.csv” denote the adaptation’s proportion at every temperature of the total population and its 95%CI, The latter denotes the values ​​of 200 RRs obtained by Monte Carlo simulation
                  File " adapt_subgroup.xlsx” denotes the adaptation’s proportion at every temperature for each wealth subgroup, folder " adapt_Monte Carlo" includes the 5 csv files, denote the each wealth subgroup's adaptation proportion at every temperature during 0 to 33°C for five grids, and "wealth1000", "wealth1000", "wealth1500", "wealth2000", "wealth2500", "wealth3000" denote the 1.0*1.0km, 1.5*1.5km, 2.0*2.0km, 2.5*2.5km 3.0*3.0km grid resolutions,respectively.